<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novel - Chapter constructor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header navbar-light bg-light border-bottom">
      <div class="container">
        <nav class="navbar navbar-expand-lg">
          <a class="navbar-brand d-block me-4" href="#">Novel</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Roadmap</a>
              </li>

              <li class="nav-item">
                <a class="nav-link active" href="constructor.html">Chapter constructor</a>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </header>
    
    
    <section class="mt-5">
      <div class="container">
         <div class="alert alert-info" role="alert">
          <h4 class="alert-heading">Under development</h4>
          <p class="mb-0">This page is under development.</p>
        </div>
      </div>
    </section> 

    <section class="mt-5">
      <div class="container">
        <h2 class="mt-0 mb-3">Chapter's list</h2>
        <div id="listOfChapters" class="d-flex flex-column gap-3">
          
        </div>
      </div>
    </section>

    <section class="mt-5">
      <div class="container">
        <h2 class="mt-0">Step constructor</h2>

        <div id="stepConstructor">
          <div class="mb-3">
            <label for="parentChapter" class="form-label">Belongs to chapter</label>
            <select class="form-select" aria-label="Chapter" id="parentChapter">
              <option value="id" selected>The Beginning</option>
              <option value="id">The End</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="stepName" class="form-label">Step title</label>
            <input type="text" class="form-control" id="stepName" placeholder="Title">
          </div>

          <div class="mb-3">
            <label for="stepText" class="form-label">Step text</label>
            <textarea class="form-control" id="stepText" rows="3"></textarea>
          </div>

          <button class="btn btn-secondary mb-3" type="button" id="addChoiceBtn">Add choice</button>
          <div id="createChoiceForm" class="card bg-light p-3 mb-3 d-none">
            <h5 class="mb-2">Create choice</h5>

            <div class="mb-3">
              <label for="choiceText" class="form-label">Choice text</label>
              <input type="text" class="form-control" id="choiceText" placeholder="Choice text">
              <small class="fst-italic text-muted">The text that user will see on a choice button.</small>
            </div>

            <div class="mb-3">
              <label for="choiceValue" class="form-label">Choice value</label>
              <input type="text" class="form-control" id="choiceValue" placeholder="Choice value">
              <small class="fst-italic text-muted">The value that can be used as condition for a choice to get to a certain step. For example, "emotion" or "luck".</small>
            </div>

            <div class="">
              <label for="choiceText" class="form-label mb-1">Stats</label>
              <small class="d-block fst-italic text-muted mb-2">Stas will be gathered to the Statistics section as a parameter-value. For example "intellectual" - "1" or "instinctual" - "2". Choice can be without stats.</small>

              <div id="statsContainer" class="d-flex flex-column gap-2">
                <div class="d-flex gap-2 stats-item">
                  <input type="text" class="form-control" id="statItem_0" placeholder="Stat name">
                  <input type="number" class="form-control w-25" id="statValue_0" placeholder="Stat value">
                  <button class="btn btn-outline-danger js-remove-stat" type="button">Remove</button>
                </div>
              </div>

              <button class="btn btn-outline-success btn-sm mt-2" type="button" id="addStatBtn">Add stat</button>
            </div>

            <div class="mt-3">
              <label for="" class="form-label mb-1">Next step</label>
              <small class="d-block fst-italic text-muted mb-2">Choice will trigger a certain step to get to or you can add conditions with a if-else check.</small>
              
              <fieldset id="nextStepContainer" class="fieldset">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="nextStep" id="nextStep_id" checked>
                  <label class="form-check-label" for="nextStep_id">
                    Define the next step itself.
                  </label>
                </div>

                <div class="suboption ps-4" for="nextStep_id">
                  <div class="mb-3">
                    <label for="nextStepId_direct" class="form-label">Select step from a list</label>
                    <select class="form-select js-next-stepID-list" aria-label="Steps list" id="nextStepId_direct"></select>
                  </div>
                </div>

                <div class="form-check mt-3">
                  <input class="form-check-input" type="radio" name="nextStep" id="nextStep_condition">
                  <label class="form-check-label" for="nextStep_condition">
                    Define the next step by checking a condition.
                  </label>
                </div>

                <div class="suboption ps-4 d-none" for="nextStep_condition">
                  <div class="">
                    <label for="nextStepId" class="form-label mb-0">Conditions</label>
                    <small class="d-block fst-italic text-muted mb-3">Conditions will be checked in the order they are added.</small>
                    <div id="nextStepConditionsContainer" class="d-flex flex-column gap-2"></div>

                    <div id="nextStepConditionsList" class="mb-3 d-flex flex-column gap-2">
                      <div class="d-flex gap-2 align-items-center js-next-stepCondition">
                        <span>If</span>
                        <input type="text" name="statName" class="form-control" id="" placeholder="Stat name">
                        <select name="statOperator" class="form-select flex-shrink-1" id="">
                          <option value="equals">equals</option>
                          <option value="notEquals">not equals</option>
                          <option value="lessThan">less than</option>
                          <option value="greaterThan">greater than</option>
                          <option value="lessOrEquals">less or equals</option>
                          <option value="greaterOrEquals">greater or equals</option>
                        </select>
                        <input type="number" name="statValue" class="form-control flex-shrink-1 w-25" id="" placeholder="0">
                        <span class="flex-shrink-0">then go to</span>
                        <select class="form-select js-next-stepID-list" aria-label="Steps list"></select>
                        <button class="btn btn-outline-danger js-remove-condition" type="button">Remove</button>
                      </div>
                    </div>

                    <div class="alert alert-info" role="alert">
                      <p class="mb-0">Need to rethink about the conditions constructor.</p>
                    </div>

                    <div class="btn-group-vertical">
                      <button class="btn btn-sm btn-outline-success" type="button" id="addNextStepConditionBtn_simple">Add condition with one stat checking</button>
                      <button class="btn btn-sm btn-outline-success" type="button" id="addNextStepConditionBtn_complex">Add condition with multiple stats checking</button>
                      <button class="btn btn-sm btn-outline-success" type="button" id="addNextStepConditionBtn_logsCheck">Add condition for checking a certain choice value of a certain step</button>
                      <button class="btn btn-sm btn-outline-success" type="button" id="addNextStepConditionBtn_logsCheck">Add condition with multiple rules for checking a certain choice value of a certain step and checking stats</button>
                    </div>

                    <div class="mt-3">
                      <label for="nextStepId_default" class="form-label">If no condition is met go to</label>
                      <select class="form-select js-next-stepID-list" aria-label="Steps list" id="nextStepId_default"></select>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>

            <hr class="my-3">

            <div class="d-flex gap-2">
              <button id="saveChoiceBtn" class="btn btn-secondary" type="button">Save choice</button>
              <button id="cancelChoiceBtn" class="btn btn-outline-secondary" type="button">Cancel</button>
            </div>
          </div>

          <div id="choicesContainer" class="d-none"></div>

          <div class="mt-3">
            <hr class="my-3">
            <button class="btn btn-primary" id="createStepBtn" type="button" disabled>Create step</button>
          </div>
        </div>
      </div>
    </section>

    <section class="mt-5">
      <div class="container">
        <h2 class="mt-0">Chapter constructor</h2>
        <div id="chapterConstructor">
          <div class="mb-3">
            <label for="chapterTitle" class="form-label">Chapter title</label>
            <input type="text" class="form-control" id="chapterTitle" placeholder="Title">
          </div>

          <div class="mb-3">
            <label for="chapterType" class="form-label">As a</label>
            <select class="form-select" aria-label="Chapter type" id="chapterType">
              <option value="chapters" selected>Main chapter line</option>
              <option value="sideChapters">Side chapter line</option>
            </select>
          </div>

          <button class="btn btn-primary" id="createChapterBtn" type="button">Create</button>
        </div>
      </div>
    </section>

    <footer class="footer bg-black bg-opacity-75 mt-5">
      <div class="container">
        <p class="text-white-50 mb-0 text-center p-2">© 2024 Novel. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="constructor.js"></script>
</body>
</html>
